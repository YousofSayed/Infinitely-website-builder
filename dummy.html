<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GrapesJS Load Test — 500+ Elements</title>
  <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet" />
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:0;height:100vh;display:flex;flex-direction:column}
    header{padding:12px;border-bottom:1px solid #eee;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    #gjs{flex:1;}
    .controls button{padding:8px 12px;border-radius:6px;border:1px solid #ccc;background:#fff;cursor:pointer}
    .controls input{width:80px;padding:6px}
    .status{margin-left:12px;color:#444}
  </style>
</head>
<body>
  <header>
    <div class="controls">
      <button id="loadBtn">Load 500 elements</button>
      <button id="load1000Btn">Load 1000 elements</button>
      <button id="appendBtn">Append 100 elements</button>
      <button id="clearBtn">Clear</button>
      <button id="destroyBtn">Destroy Editor</button>
      <label>Delay(ms): <input id="delayInput" type="number" value="0" /></label>
    </div>
    <div class="status" id="status">Ready</div>
  </header>

  <div id="gjs"></div>

  <script src="https://unpkg.com/grapesjs/dist/grapes.min.js"></script>
  <script>
    let editor;

    function initEditor(){
      editor = grapesjs.init({
        container: '#gjs',
        fromElement: false,
        height: '100%',
        storageManager: { autoload: 0 },
        panels: { defaults: [] },
      });

      editor.addStyle(`.test-item{background:#fafafa;border-radius:4px}`);
      editor.setComponents('<div style="padding:12px">Click "Load 500 elements" to start the test.</div>');
      window.testEditor = editor;
    }

    initEditor();

    const statusEl = document.getElementById('status');
    const delayInput = document.getElementById('delayInput');

    function logStatus(txt){ statusEl.textContent = txt; }

    function makeComp(i){
      return {
        tagName: 'div',
        attributes: { class: 'test-item' },
        components: [ { type: 'text', content: `Item ${i}` } ],
        style: {
          padding: '8px 10px',
          margin: '4px',
          border: '1px solid #ddd',
          display: 'inline-block',
        }
      };
    }

    async function appendMany(count, chunk = 100){
      const delay = Number(delayInput.value) || 0;
      const wrapper = editor.DomComponents.getWrapper();
      logStatus(`Appending ${count} components...`);
      for(let start = 0; start < count; start += chunk){
        const batch = [];
        const end = Math.min(start + chunk, count);
        for(let i = start+1; i <= end; i++) batch.push(makeComp(i + (Date.now()%1000)));
        wrapper.append([...batch , `<infinitely-svg><svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#0055ff" inf-class-name="inf-NTEzMQ742" id="ica64f" class="inf-NTEzMQ742" data-gjs-type="svg" >
        <g id="SVGRepo_bgCarrier" stroke-width="0" class="drop" data-gjs-tagName="g" data-gjs-type="svg-in"  data-gjs-tagname="g"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" class="drop" data-gjs-tagName="g" data-gjs-type="svg-in"  data-gjs-tagname="g"></g>
        <g id="SVGRepo_iconCarrier" data-gjs-tagName="g" data-gjs-type="svg-in"  data-gjs-tagname="g">
          <path d="M4 6H20M4 12H20M4 18H20" stroke="#0055ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="drop" data-gjs-tagName="path" data-gjs-type="svg-in"  data-gjs-tagname="path"/>
        </g>
      </svg></infinitely-svg>`] );
        if(delay > 0) await new Promise(r => setTimeout(r, delay));
        else await new Promise(r => requestAnimationFrame(r));
        logStatus(`Appended ${end} / ${count}`);
      }
      logStatus(`Done: ${count} components appended`);
    }

    document.getElementById('loadBtn').addEventListener('click', async () => {
      editor.setComponents('');
      await appendMany(500, 100);
    });

    document.getElementById('load1000Btn').addEventListener('click', async () => {
      editor.setComponents('');
      await appendMany(1000, 100);
    });

    document.getElementById('appendBtn').addEventListener('click', async () => {
      await appendMany(100, 50);
    });

    document.getElementById('clearBtn').addEventListener('click', () => {
      editor.setComponents('');
      logStatus('Cleared');
      setTimeout(()=>console.log('Cleared components and returned control to event loop.'), 0);
    });

    document.getElementById('destroyBtn').addEventListener('click', () => {
      if(editor){
        editor.destroy();
        // editor = null;
        console.log('editor : ' , editor)
        // document.getElementById('gjs').innerHTML = '';
        logStatus('Editor destroyed');
      }
    });

    logStatus('Editor ready — use the buttons to load elements.');
  </script>
</body>
</html>

//////////////////////////////
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Infinitely Studio Editor – Build and edit websites in real-time with speed, privacy, and complete creative control."
    />
    <meta
      name="keywords"
      content="real-time website editor, fast visual editor, offline web design tool, drag and drop builder, responsive preview, live CSS animation editor, reusable components editor, web page builder interface, no-code development tool, Infinitely Studio editor, custom layout builder, motion design editor, interactive UI builder, design tool for developers, advanced website editor"
    />
    <link rel="stylesheet" href="./index.css" />
    <title>Infinitely Studio</title>
  </head>
  <body>
    <!-- Host container for iframe -->
    <div id="host" style="width: 100%; height: 100%"></div>

    <!-- Host script -->
    <script type="module" src="/host.jsx"></script>
  </body>
</html>


<!-- This file is the host HTML file that contains the iframe for the editor.
 It includes a div with id "host" where the iframe will be mounted.
 The host.js script is responsible for creating and managing the iframe. -->




 <!DOCTYPE html>
<html lang="en">
  <head>
    <!-- <base href="/"> -->
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Infinitely Studio Editor – Build and edit websites in real-time with speed, privacy, and complete creative control."
    />
    <meta
      name="keywords"
      content="real-time website editor, fast visual editor, offline web design tool, drag and drop builder, responsive preview, live CSS animation editor, reusable components editor, web page builder interface, no-code development tool, Infinitely Studio editor, custom layout builder, motion design editor, interactive UI builder, design tool for developers, advanced website editor"
    />

    <title>Infinitely Studio</title>
  </head>
  <body class="bg-gray-900">
    <div id="root"></div>

    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>



